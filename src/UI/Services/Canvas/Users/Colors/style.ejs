<style>
  // TODO shift to sass-in-browser instead of ejs-generated CSS?
  <%
    for (const asset of assets) {
      const context_code = asset.contextCode;
      const selector = `.${context_code}:not([class*="_block"])`;
      const color = asset.base.toHexString();
      const color_on_white = asset.baseOnWhite.toHexString();
      const text_on_color = asset.textOnBase.toHexString();
      const hsl = asset.base.toHsl();
  %>
    :root {
      --<%= context_code %>: <%= color %>;
      --text-on-<%= context_code %>: <%= text_on_color %>;
      --<%= context_code %>-on-white: <%= color_on_white %>;
      --<%= context_code %>-h: <%= hsl.h %>;
      --<%= context_code %>-s: <%= hsl.s * 100 %>%;
      --<%= context_code %>-l: <%= hsl.l * 100 %>%;
    }

    .fc-event<%- selector %> {
      color: <%= color_on_white %>;
      border-color: <%= color %>;
      background-color: white;
    }

    .fc-event<%- selector %> .fc-event-main {
      color: <%= color_on_white %>;
    }

    .fc-event.Assignment<%- selector %>,
    .fc-event.PlannerEvent<%- selector %> {
      color: <%= text_on_color %>;
      border-color: <%= color %>;
      background-color: <%= color %>;
    }

    .fc-event.Assignment<%- selector %> .fc-event-main,
    .fc-event.PlannerEvent<%- selector %> .fc-event-main {
      color: <%= text_on_color %>;
    }

    .modal-header<%- selector %> {
      color: <%= text_on_color %>;
      background-color: <%= color %>;
    }

    .fc-list-event-hover<%- selector %> {
      background-color: hsl(<%= hsl.h %>, calc(<%= hsl.s * 100 %>% * var(--done-s-factor)), calc(<%= hsl.l * 100 %>% * 0.85));
    }

    .fc-event<%- selector %>.done {
      background-color: hsl(<%= hsl.h %>, calc(<%= hsl.s * 100 %>% * var(--done-s-factor)), calc(<%= hsl.l * 100 %>% * var(--done-l-factor)));
    }


    .modal-header<%- selector %>.done {
      background-color: hsl(<%= hsl.h %>, calc(<%= hsl.s * 100 %>% * var(--done-s-factor)), calc(<%= hsl.l * 100 %>% * var(--done-l-factor)));
    }

    .modal-header<%- selector %> .form-check-input {
      border-color: <%= text_on_color %>;
      background-color: <%= color %>;
    }

    #calendar-selector .<%= context_code %> .form-check-input,
    #calendar-selector .<%= context_code %> a .collapse-toggle:before,
    #calendar-selector .<%= context_code %> a .expand-toggle:before {
      color: <%= text_on_color %>;
      border-color: <%= text_on_color %>;
      background-color: <%= color %>;
    }

    #calendar-selector .<%= context_code %> .form-check-input:checked {
      background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path fill='none' stroke='<%= encodeURIComponent(text_on_color) %>' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10l3 3l6-6'/></svg>");
    }

    #calendar-selector .<%= context_code %> .ClassMeeting .form-check-input,
    #calendar-selector .<%= context_code %> .CalendarEvent .form-check-input {
      border-color: <%= color_on_white %>;
      background-color: white;
    }

    #calendar-selector .<%= context_code %> .ClassMeeting .form-check-input:checked,
    #calendar-selector .<%= context_code %> .CalendarEvent .form-check-input:checked {
      background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path fill='none' stroke='<%= encodeURIComponent(color_on_white) %>' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10l3 3l6-6'/></svg>");
    }

  <% } %>
</style>

